$(function(){function formatNumber(n){return n.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")}function formatData(input){var input_val=input.val().split(",").join(""),input_val=parseInt(input_val.match(/\d+/),10);console.log(input_val)}function formatCurrency(input){var input_val=input.val(),caret_pos=input.prop("selectionStart"),original_len=input_val.length;""!==input_val&&(input_val="$"+(input_val=formatNumber(input_val)),input.val(input_val),caret_pos=input_val.length-original_len+caret_pos,input[0].setSelectionRange(caret_pos,caret_pos))}function formatPercentage(input){var input_val=input.val(),caret_pos=input.prop("selectionStart"),original_len=input_val.length;""!==input_val&&(input_val=formatNumber(input_val),input_val+="%",input.val(input_val),caret_pos=input_val.length-original_len+caret_pos,input[0].setSelectionRange(caret_pos,caret_pos))}$("input[name='entry.1486781400']").on("click",function(){console.log($(this).val()),"purchase"===$(this).val()?($(".purchasing").show(),$(".refinancing").hide(),$("#percent").attr("placeholder","20%"),$("#dollar").attr("placeholder","$60,000")):($(".purchasing").hide(),$(".refinancing").show(),$("#percent").attr("placeholder","80%"),$("#dollar").attr("placeholder","$240,000"))}),$("input[name='entry.1525139678']").on({keyup:function(){formatCurrency($(this)),formatData($(this))}}),$("input[name='entry.327660014']").on({keyup:function(){formatCurrency($(this)),formatData($(this))}}),$("input[name='entry.784023676']").on({keyup:function(){formatCurrency($(this)),formatData($(this))}}),$("input[name='entry.1889879909']").on({keyup:function(){formatCurrency($(this)),formatData($(this))}}),$("input[name='entry.2859881']").on({keyup:function(){formatPercentage($(this)),formatData($(this))}}),$("input[name='entry.1694289332']").on({keyup:function(){formatPercentage($(this)),formatData($(this))}}),$("input[name='entry.670253592']").on({keyup:function(){!function(input){var input_val=input.val();{if(""===input_val)return;input_val=input_val.replace(/\D+/g,"").replace(/(\d{3})(\d{3})(\d{4})/,"$1-$2-$3")}input.val(input_val)}($(this))}}),$("#currency-field").on("keyup",function(){var cost=$(this).val().split(",").join(""),cost=parseInt(cost.match(/\d+/),10);console.log(cost);var percent=parseInt($("#percent").val().match(/\d+/),10),dollar=$("#dollar").val().split(",").join(""),dollar=parseInt(dollar.match(/\d+/),10);!0===isNaN(cost)?($("#percent").val("0%"),$("#dollar").val("$0")):!1===isNaN(percent)&&!1===isNaN(dollar)&&($("#percent").val(Math.ceil(dollar/cost)+"%"),$("#dollar").val("$"+Math.ceil(cost*percent)))}),$("#percent").on("keyup",function(){var dollar,val=parseInt($(this).val().match(/\d+/),10),item=$("#currency-field").val().split(",").join(""),num=parseInt(item.match(/\d+/),10);!0===isNaN(val)?$("#dollar").val("$0"):(dollar=(dollar=Math.ceil(num*val/100)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),$("#dollar").val("$"+dollar))}),$("#dollar").on("keyup",function(){var val=$(this).val().split(",").join(""),val=parseInt(val.match(/\d+/),10);console.log(val);var item=$("#currency-field").val().split(",").join(""),num=parseInt(item.match(/\d+/),10);!0===isNaN(val)?$("#percent").val("0%"):$("#percent").val(Math.ceil(100*val/num)+"%")}),$("form[name='application-form']").validate({ignore:[],rules:{"entry.1486781400":{required:!0},"entry.1004451045":{required:!0},"entry.1969835035":{required:!0},"entry.1613886317":{required:!0},"entry.860121282":{required:!0},"entry.152925055":{required:!0},"entry.758167786":{required:!0},"entry.105311915":{required:!0},"entry.279358715":{required:!0},"entry.784023676":{required:!0},"entry.1694289332":{required:!0},"entry.1889879909":{required:!0},"entry.1499206232":{required:!0},"entry.1861675471":{required:!0,email:!0},"entry.670253592":{required:!0,minlength:12,maxlength:12}},messages:{"entry.1486781400":{required:"Please select an option. "},"entry.1004451045":{required:"Please select an option."},"entry.1969835035":{required:"Please select an option."},"entry.1613886317":{required:"Please select an option."},"entry.860121282":{required:"Please select an option."},"entry.152925055":{required:"Please enter a valid address."},"entry.758167786":{required:""},"entry.105311915":{required:""},"entry.279358715":{required:""},"entry.784023676":{required:"Please provide an estimated price."},"entry.1694289332":{required:""},"entry.1889879909":{required:"Please provide an estimated down payment."},"entry.1499206232":{required:"Please donâ€™t leave this blank."},"entry.1861675471":{required:"Please enter a valid email address."},"entry.670253592":{required:"Please enter a valid phone number.",minlength:"Please enter a valid phone number.",maxlength:"Please enter a valid phone number."}},submitHandler:function(form){return $.ajax({url:"https://docs.google.com/forms/d/e/1FAIpQLSd1dng2c1vB31_CaTMhEdIk9YK2RhjxFFVnfcvrPeGqC7o7qA/formResponse",data:$(form).serialize(),type:"GET",dataType:"json",crossorigin:!0}).always(function(){form.reset(),$(".success").show()}),!1}})});var FormAddressAutocomplete={initAutocomplete:function(autocompleteField,streetField,cityField,stateField,zipCodeField,fullAddressField,callbackFunction){this.streetField=streetField,this.cityField=cityField,this.stateField=stateField,this.zipCodeField=zipCodeField,this.fullAddressField=fullAddressField,this.callbackFunction=callbackFunction;this.autocomplete=new google.maps.places.Autocomplete(document.getElementById(autocompleteField),{types:["geocode"],componentRestrictions:{country:"US"}}),this.autocomplete.addListener("place_changed",this.populateAddress)},populateAddress:function(){var addressComponentTypes={street_number:"short_name",route:"long_name",locality:"long_name",administrative_area_level_1:"short_name",postal_code:"short_name"},place=FormAddressAutocomplete.autocomplete.getPlace();if(!place.address_components)return!1;for(var addressComponent=[],i=0;i<place.address_components.length;i++){var addressType=place.address_components[i].types[0];addressComponentTypes[addressType]&&(addressComponent[addressType]=place.address_components[i][addressComponentTypes[addressType]])}addressComponent.street_number;var route=addressComponent.route||"",streetAddress=(addressComponent.street_number?addressComponent.street_number+" ":"")+route;""==streetAddress&&place.name!=addressComponent.locality&&place.name!=addressComponent.postal_code&&addressComponent.postal_code&&(streetAddress=place.name||!1);var city=addressComponent.locality||"",state=addressComponent.administrative_area_level_1||"",zipCode=addressComponent.postal_code||"",fullAddress=streetAddress?streetAddress+", ":"";fullAddress+=addressComponent.locality?addressComponent.locality+", ":"",fullAddress+=addressComponent.administrative_area_level_1?addressComponent.administrative_area_level_1:"",fullAddress+=addressComponent.postal_code?", "+addressComponent.postal_code:"",void 0!==FormAddressAutocomplete.streetField&&""!==FormAddressAutocomplete.streetField&&(document.getElementById(FormAddressAutocomplete.streetField).value=streetAddress),void 0!==FormAddressAutocomplete.cityField&&""!==FormAddressAutocomplete.cityField&&(document.getElementById(FormAddressAutocomplete.cityField).value=city),void 0!==FormAddressAutocomplete.stateField&&""!==FormAddressAutocomplete.stateField&&(document.getElementById(FormAddressAutocomplete.stateField).value=state),void 0!==FormAddressAutocomplete.zipCodeField&&""!==FormAddressAutocomplete.zipCodeField&&(document.getElementById(FormAddressAutocomplete.zipCodeField).value=zipCode),void 0!==FormAddressAutocomplete.fullAddressField&&""!==FormAddressAutocomplete.fullAddressField&&(document.getElementById(FormAddressAutocomplete.fullAddressField).value=fullAddress),void 0!==FormAddressAutocomplete.callbackFunction&&""!==FormAddressAutocomplete.callbackFunction&&FormAddressAutocomplete.callbackFunction(fullAddress)}};function autocompleteStart(){var input=document.getElementById("address-autocomplete");return google.maps.event.addDomListener(input,"keydown",function(event){13===event.keyCode&&event.preventDefault()}),FormAddressAutocomplete.initAutocomplete("address-autocomplete","street-field","city-field","state-field","zip-code-field","full-address-field",autocompleteFinished)}function autocompleteFinished(data){alert("Callback Function | Full Address String: "+data)}